---
title: datetime
editor_options: 
  chunk_output_type: console
---

```{r knitr_config, code=readLines("_knitr_config.R"), echo=FALSE}
```

*********************************************************************

> Fast implementation of the datetime type

*********************************************************************

## faqs

datetime:

* [unix to posix](#datetime-unix-to-posix)  
* [string to posix](#datetime-string-to-posix)  
* [posix to unix](#datetime-posix-to-unix)  
* [posix to string](#datetime-posix-to-string)  
* [change timezone](#datetime-change-timezone)  

*********************************************************************

## links

realpython:

* [python-datetime](https://realpython.com/python-datetime)  

*********************************************************************

## date

```{python}
import datetime as dt
a_date = dt.date(year=2020, month=12, day=31)
a_date
a_date.year, a_date.month, a_date.day
a_date.isoformat()
a_date.strftime("%a %d %b %Y")
```

```{python}
import datetime as dt
dt.date.today()
dt.date.fromisoformat("2020-12-31") # ISO to POSIX
```

*********************************************************************

## time

```{python}
import datetime as dt
a_time = dt.time(hour=23, minute=59, second=59, microsecond=999999)
a_time
a_time.hour, a_time.minute, a_time.second, a_time.microsecond
a_time.isoformat()
a_time.strftime("%H:%M:%S")
```

### iso time to posix

```{python}
import datetime as dt
dt.time.fromisoformat("23:59:59") # ISO to POSIX
dt.time.fromisoformat("23:59:59:999999") # ISO to POSIX
```

*********************************************************************

## datetime

```{python}
import datetime as dt
a_datetime = dt.datetime(year=2020, month=12, day=31, 
                         hour=23, minute=59, second=59, 
                         microsecond=999999)
a_datetime
a_datetime.year, a_datetime.month, a_datetime.day
a_datetime.hour, a_datetime.minute, a_datetime.second, a_datetime.microsecond
```

```{python}
import datetime as dt
dt.datetime.now()
```

### conversions 

#### unix to posix {#datetime-unix-to-posix}

```{python}
import datetime as dt
timestamp = 1599605723.4624178
dt.datetime.fromtimestamp(timestamp)
```

#### string to posix {#datetime-string-to-posix}

```{python}
import datetime as dt
dt.datetime.fromisoformat("2020-12-31T23:59:59:999999")
dt.datetime.strptime("2020-12-31 23:59:59", "%Y-%m-%d %H:%M:%S")
```

#### posix to unix {#datetime-posix-to-unix}

```{python}
import datetime as dt
a_datetime = dt.datetime.now()
a_datetime.timestamp()
```

#### posix to string {#datetime-posix-to-string}

```{python}
import datetime as dt
a_datetime = dt.datetime.now()
a_datetime.isoformat()
a_datetime.strftime("%Y-%m-%d %H:%M:%S")
```

### timezones

```{python}
import datetime as dt
from dateutil import tz
dt.datetime.now(tz=tz.tzlocal())
dt.datetime.now(tz=tz.gettz("Europe/London")).tzname()
dt.datetime.now(tz=tz.gettz("America/New_York")).isoformat()
```

#### change timezone {#datetime-change-timezone}

```{python}
import datetime as dt
from dateutil import tz
a_datetime = dt.datetime.now(tz=tz.tzlocal())
a_datetime.isoformat()
a_datetime.astimezone(tz.gettz("America/New_York")).isoformat()
```

*********************************************************************

## timedelta

```{python}
import datetime as dt
delta = dt.timedelta(days=100)
delta
dt.date.today() - delta
(dt.date.today() - delta) < dt.date.today()
```

*********************************************************************

## misc

```{python}
import datetime as dt
dt.MINYEAR
dt.MAXYEAR
# dt.tzinfo()
# dt.timezone()
```

*********************************************************************

## appendix: dir

```{python}
from pprint import pprint
import datetime as dt
pprint(dir(dt))
```

### date

```{python}
from pprint import pprint
import datetime as dt
pprint(dir(dt.date))
```

### time

```{python}
from pprint import pprint
import datetime as dt
pprint(dir(dt.time))
```

### datetime

```{python}
from pprint import pprint
import datetime as dt
pprint(dir(dt.datetime))
```

### timedelta

```{python}
from pprint import pprint
import datetime as dt
pprint(dir(dt.timedelta))
```
